# 🏥 HealthGuard - 个人健康管理系统

一个功能完整的个人健康管理系统，基于 Python C/S 架构开发，实现"数据记录-分析-干预-跟踪"健康管理闭环。

## ✨ 核心功能

### 一、基础功能（满足课程要求）

#### 1. 用户界面 ✅

- 基于 Tkinter 的现代化 GUI 设计
- Admin Dashboard 风格布局（侧边栏 + 顶栏 + 内容区）
- 响应式卡片式设计
- 专业配色方案

#### 2. 数据库支持 ✅

- SQLite 数据库
- 7 张规范化设计的数据表
- 支持用户档案、健康数据、用药记录、目标管理等
- 完整的 CRUD 操作

#### 3. 远程登录访问（网络模块）✅

- Socket TCP 通信
- 支持局域网多客户端连接
- JSON 数据格式传输
- 多线程并发处理

#### 4. 用户登录与注销 ✅

- SHA256 密码加密
- 完整的身份验证系统
- 会话管理

#### 5. 不同身份用户操作区分 ✅

**普通用户功能**：

- 📊 健康仪表盘（数据可视化）
- 📝 健康打卡（多维度数据录入）
- 👤 健康档案管理
- 💊 用药管理
- 🎯 健康目标设定与跟踪
- 🍎 饮食记录
- ⏰ 提醒中心

**管理员功能**：

- 📈 系统数据统计
- 👥 用户数量监控
- 📊 数据分析概览

### 二、附加功能（差异化优势）

#### 1. 数据可视化 ✅

- Matplotlib 折线图（体重趋势）
- 柱状图（步数统计）
- Treeview 表格展示
- 实时数据更新

#### 2. 完整的健康管理闭环 ✅

- **记录**：多维度健康数据录入（体重、血压、血糖、心率、体温、睡眠、步数等）
- **分析**：趋势图表、历史数据对比
- **干预**：健康目标设定、用药提醒
- **跟踪**：目标进度监控、数据持续记录

#### 3. 数据库并发控制 ✅

- 多线程处理客户端请求
- SQLite 事务管理
- 连接池管理

#### 4. 其他特性 ✅

- 🔒 密码加密存储（SHA256）
- 🎨 专业 UI 设计（Element UI 风格）
- 📱 多页面导航系统
- 💾 数据本地存储
- 🌐 支持远程访问

## 📦 安装依赖

```bash
pip install matplotlib
```

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install matplotlib
```

### 2. 启动服务器（必须先启动）

```bash
cd HealthGuard
python server.py
```

**成功标志**：看到 `[LISTENING] Server is listening on 0.0.0.0:9999`

### 3. 启动客户端

**新开一个终端窗口**，运行：

```bash
cd HealthGuard
python client.py
```

### 4. 登录系统

**默认管理员账号**:

- 用户名: `admin`
- 密码: `123456`

**普通用户**: 点击"注册"按钮创建新账户

### 5. 开始使用

登录后即可使用所有功能，详细使用方法请查看 [使用指南.md](./使用指南.md)

## 📂 项目结构

```
HealthGuard/
├── database.py       # 数据层：7张表的完整设计与操作
├── server.py         # 服务端：Socket通信、多线程、API路由
├── client.py         # 客户端：GUI界面、数据可视化、多页面管理
├── requirements.txt  # 依赖库列表
├── README.md         # 项目说明
├── 使用指南.md       # 详细使用文档
└── health_system.db  # SQLite数据库文件（自动生成）
```

## 📊 数据库设计

### 7 张数据表

1. **users** - 用户表（扩展字段：身高、血型、紧急联系人、过敏史、慢性病史）
2. **health_data** - 健康数据表（12 个指标：体重、血压、血糖、心率、体温、睡眠、步数等）
3. **medications** - 用药记录表（药品名称、剂量、频率、疗程）
4. **health_goals** - 健康目标表（目标类型、目标值、当前值、进度）
5. **reminders** - 提醒事项表（提醒类型、时间、重复规则）
6. **diet_records** - 饮食记录表（餐次、食物、热量）
7. **索引与外键** - 完整的关系设计

## 🌐 远程访问配置

如果需要在不同电脑上测试：

1. 在电脑 A 上运行 `server.py`
2. 查看电脑 A 的 IP 地址（如 `192.168.1.100`）
3. 在电脑 B 上修改 `client.py` 第 13 行：
   ```python
   SERVER_IP = '192.168.1.100'  # 改为服务器的 IP
   ```
4. 在电脑 B 上运行 `client.py`

## 💡 使用说明

### 普通用户功能

1. 注册账号并登录
2. 在左侧表单中输入健康数据（体重、血压、步数等）
3. 点击"提交记录"
4. 右侧会自动显示数据趋势图表

### 管理员功能

1. 使用管理员账号登录
2. 查看系统统计数据：
   - 注册用户总数
   - 系统记录总数
   - 用户平均体重

## 🛠️ 技术栈

- **GUI**: Tkinter
- **数据库**: SQLite3
- **网络通信**: Socket (TCP)
- **数据可视化**: Matplotlib
- **并发处理**: Threading
- **数据格式**: JSON

## 📝 数据库设计

### users 表

| 字段     | 类型    | 说明               |
| -------- | ------- | ------------------ |
| id       | INTEGER | 主键               |
| username | TEXT    | 用户名（唯一）     |
| password | TEXT    | 密码（SHA256）     |
| role     | TEXT    | 角色（user/admin） |
| age      | INTEGER | 年龄               |
| gender   | TEXT    | 性别               |

### health_data 表

| 字段         | 类型    | 说明            |
| ------------ | ------- | --------------- |
| id           | INTEGER | 主键            |
| user_id      | INTEGER | 用户 ID（外键） |
| record_date  | TEXT    | 记录日期        |
| weight       | REAL    | 体重            |
| systolic_bp  | INTEGER | 收缩压          |
| diastolic_bp | INTEGER | 舒张压          |
| steps        | INTEGER | 步数            |

## ⚠️ 注意事项

1. **必须先启动服务器再启动客户端**
2. 确保端口 9999 未被占用
3. 如果遇到中文显示问题，系统会自动尝试使用备用字体
4. 数据库文件会在首次运行时自动创建

## 📄 License

本项目仅供学习使用。

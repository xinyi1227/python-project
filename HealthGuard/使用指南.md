# 🏥 HealthGuard 个人健康管理系统 - 完整使用指南

## 📌 系统概述

HealthGuard 是一个功能完整的个人健康管理系统，采用 C/S 架构，实现了"数据记录-分析-干预-跟踪"的健康管理闭环。

### 核心特性

- ✅ 完整的健康档案管理
- ✅ 多维度健康数据记录（体重、血压、血糖、心率等）
- ✅ 用药提醒与管理
- ✅ 健康目标设定与跟踪
- ✅ 饮食记录与分析
- ✅ 提醒中心（用药、测量、运动等）
- ✅ 数据可视化（图表展示）
- ✅ 角色权限管理（普通用户/管理员）

---

## 🚀 快速开始

### 1. 环境准备

```bash
# 安装依赖
pip install matplotlib

# 确保 Python 版本 >= 3.7
python --version
```

### 2. 启动系统

#### 步骤 1：启动服务器（必须先启动）

```bash
cd HealthGuard
python server.py
```

**成功标志**：看到 `[LISTENING] Server is listening on 0.0.0.0:9999`

#### 步骤 2：启动客户端

**新开一个终端窗口**，运行：

```bash
cd HealthGuard
python client.py
```

### 3. 首次登录

**默认管理员账号**：

- 用户名：`admin`
- 密码：`123456`

**普通用户**：点击"注册"按钮创建新账户

---

## 📖 功能详解

### 一、登录与注册

#### 登录界面

- 输入用户名和密码
- 系统自动识别用户角色（普通用户/管理员）
- 登录后跳转到对应的仪表盘

#### 注册新用户

1. 点击"注册"按钮
2. 填写：用户名、密码、年龄、性别
3. 提交后自动返回登录页

---

### 二、普通用户功能

#### 1. 📊 仪表盘

**路径**：登录后默认页面

**功能**：

- 查看健康数据趋势图（体重变化曲线）
- 查看历史记录表格（日期、体重、步数、血压）
- 快速了解健康状态

**使用建议**：

- 每天查看一次，了解健康趋势
- 关注异常数据（如血压突然升高）

---

#### 2. 📝 健康打卡

**路径**：左侧菜单 → 健康打卡

**可记录指标**：

**基础指标**：

- 日期（自动填充今日日期）
- 体重 (kg)
- 收缩压/舒张压 (mmHg)
- 心率 (次/分)
- 血糖 (mmol/L)
- 体温 (°C)

**生活习惯**：

- 步数
- 睡眠时长 (小时)
- 饮水量 (ml)

**备注**：

- 可添加文字备注（如"今天血压高是因为熬夜"）

**操作步骤**：

1. 填写需要记录的指标（不必全部填写）
2. 点击"提交今日数据"
3. 提交成功后，表单自动清空（日期保留）

**使用建议**：

- 每天固定时间打卡（如早上起床后）
- 血压/血糖建议空腹测量
- 备注栏记录影响因素（饮食、运动、情绪等）

---

#### 3. 👤 健康档案

**路径**：左侧菜单 → 健康档案

**可管理信息**：

- 身高 (cm)
- 血型（如 A 型、B 型）
- 紧急联系人（姓名+电话）
- 过敏史（食物/药物/花粉等）
- 慢性病史（高血压、糖尿病等）

**操作步骤**：

1. 填写/更新档案信息
2. 点击"保存档案"

**使用建议**：

- 首次使用时务必填写完整
- 过敏史和慢性病史对就医非常重要
- 紧急联系人建议填写家人电话

---

#### 4. 💊 用药管理

**路径**：左侧菜单 → 用药管理

**功能**：

- 添加用药记录
- 查看用药清单
- 删除过期用药

**添加用药步骤**：

1. 点击"➕ 添加用药"
2. 填写：
   - 药品名称\*（必填）
   - 剂量（如：1 片/次）
   - 频率（如：每日 3 次）
   - 开始日期\*（必填，自动填充今日）
   - 结束日期（可选，长期用药可不填）
   - 备注（可选）
3. 点击"提交"

**查看与删除**：

- 用药清单以表格形式展示
- 选中某条记录后，点击"删除选中"即可删除

**使用建议**：

- 长期用药（如降压药）不填结束日期
- 短期用药（如感冒药）填写结束日期
- 备注栏可记录服药注意事项（如"饭后服用"）

---

#### 5. 🎯 健康目标

**路径**：左侧菜单 → 健康目标

**功能**：

- 设定健康目标（减肥、控血压等）
- 跟踪目标进度
- 查看目标完成情况

**创建目标步骤**：

1. 点击"➕ 新建目标"
2. 填写：
   - 目标类型（如：减肥、控血压）
   - 目标值（如：65kg、120mmHg）
   - 当前值（如：70kg、135mmHg）
   - 开始日期
   - 结束日期（目标期限）
3. 点击"创建"

**目标卡片显示**：

- 目标类型和进度百分比
- 目标值 vs 当前值
- 目标期限

**使用建议**：

- 目标要具体可量化（如"3 个月减 5kg"）
- 不要设置过多目标（建议 1-3 个）
- 定期更新当前值（通过健康打卡自动更新）

---

#### 6. 🍎 饮食记录

**路径**：左侧菜单 → 饮食记录

**功能**：

- 记录每日饮食
- 统计热量摄入
- 查看饮食历史

**添加饮食记录步骤**：

1. 点击"➕ 记录饮食"
2. 填写：
   - 日期（自动填充今日）
   - 餐次（早餐/午餐/晚餐/加餐）
   - 食物描述（如："1 碗米饭 + 青菜 + 鸡胸肉"）
   - 热量 (kcal)（可选）
3. 点击"提交"

**查看历史**：

- 表格展示所有饮食记录
- 按日期倒序排列

**使用建议**：

- 每餐后及时记录
- 食物描述尽量详细（便于后续分析）
- 热量可通过食物热量表查询后填写

---

#### 7. ⏰ 提醒中心

**路径**：左侧菜单 → 提醒中心

**功能**：

- 创建各类健康提醒
- 查看提醒列表
- 管理提醒状态

**创建提醒步骤**：

1. 点击"➕ 新建提醒"
2. 填写：
   - 提醒类型（用药/测量/运动/饮水/其他）
   - 提醒标题（如："服用降压药"）
   - 提醒时间（如：08:00）
   - 重复类型（once/daily/weekly）
3. 点击"创建"

**提醒类型说明**：

- **用药**：提醒按时服药
- **测量**：提醒测量血压/血糖
- **运动**：提醒每日运动
- **饮水**：提醒定时饮水
- **其他**：自定义提醒

**使用建议**：

- 用药提醒设为 daily（每日重复）
- 测量提醒设为固定时间（如早上 7 点）
- 运动提醒设为下午或晚上

---

### 三、管理员功能

#### 📊 系统管理后台

**路径**：管理员登录后默认页面

**功能**：

- 查看系统统计数据
  - 注册用户总数
  - 系统记录总数
  - 用户平均体重
- 监控系统运行状态

**使用场景**：

- 了解系统使用情况
- 监控数据增长趋势
- 辅助系统维护决策

---

## 🔧 高级功能

### 数据可视化

**位置**：用户仪表盘

**图表类型**：

1. **体重变化趋势图**（折线图）

   - 横轴：日期
   - 纵轴：体重 (kg)
   - 显示近期体重变化趋势

2. **历史记录表格**
   - 列：日期、体重、步数、血压
   - 按日期倒序排列
   - 支持滚动查看

---

## 💡 使用技巧

### 1. 数据记录建议

- **固定时间**：每天同一时间测量（如早上起床后）
- **空腹测量**：血压、血糖建议空腹测量
- **完整记录**：尽量填写所有指标（便于后续分析）
- **添加备注**：记录影响因素（如"今天运动了 1 小时"）

### 2. 目标设定建议

- **SMART 原则**：

  - Specific（具体）：明确目标内容
  - Measurable（可量化）：可用数字衡量
  - Achievable（可实现）：目标不要过高
  - Relevant（相关）：与健康需求相关
  - Time-bound（有期限）：设定完成期限

- **示例**：
  - ✅ 好目标："3 个月内体重从 70kg 降至 65kg"
  - ❌ 差目标："减肥"

### 3. 用药管理建议

- 长期用药（如降压药）：不填结束日期
- 短期用药（如感冒药）：填写结束日期
- 定期清理过期用药记录

### 4. 饮食记录建议

- 每餐后及时记录（避免遗忘）
- 食物描述详细（便于后续分析）
- 热量可通过食物热量表查询

---

## 🌐 远程访问配置

### 场景：在不同电脑上使用系统

#### 步骤 1：在电脑 A 上运行服务器

```bash
cd HealthGuard
python server.py
```

#### 步骤 2：查看电脑 A 的 IP 地址

```bash
# Windows
ipconfig

# Mac/Linux
ifconfig
```

假设电脑 A 的 IP 是 `192.168.1.100`

#### 步骤 3：在电脑 B 上修改客户端配置

打开 `HealthGuard/client.py`，修改第 13 行：

```python
SERVER_IP = '192.168.1.100'  # 改为服务器的 IP
```

#### 步骤 4：在电脑 B 上运行客户端

```bash
cd HealthGuard
python client.py
```

**注意事项**：

- 两台电脑需在同一局域网内
- 确保防火墙允许 9999 端口通信
- 服务器需保持运行状态

---

## ⚠️ 常见问题

### 1. 客户端无法连接服务器

**现象**：弹窗提示"无法连接到服务器"

**解决方案**：

1. 确认服务器已启动（看到 `[LISTENING]` 提示）
2. 检查端口 9999 是否被占用
3. 检查防火墙设置
4. 确认 `SERVER_IP` 配置正确

### 2. 数据未保存

**现象**：提交数据后，仪表盘未显示

**解决方案**：

1. 检查是否提交成功（有成功提示）
2. 刷新仪表盘（切换到其他页面再切回）
3. 检查数据库文件 `health_system.db` 是否存在

### 3. 图表不显示

**现象**：仪表盘图表区域空白

**解决方案**：

1. 确认已安装 `matplotlib`：`pip install matplotlib`
2. 确认有历史数据（至少 1 条记录）
3. 检查控制台是否有错误信息

### 4. 中文显示乱码

**现象**：界面中文显示为方块

**解决方案**：

- 系统会自动尝试使用备用字体
- Mac 用户：确保安装了中文字体
- Windows 用户：通常无此问题

---

## 📊 数据库结构

### users（用户表）

| 字段              | 类型    | 说明                |
| ----------------- | ------- | ------------------- |
| id                | INTEGER | 主键                |
| username          | TEXT    | 用户名              |
| password          | TEXT    | 密码（SHA256 加密） |
| role              | TEXT    | 角色（user/admin）  |
| age               | INTEGER | 年龄                |
| gender            | TEXT    | 性别                |
| height            | REAL    | 身高                |
| blood_type        | TEXT    | 血型                |
| emergency_contact | TEXT    | 紧急联系人          |
| allergies         | TEXT    | 过敏史              |
| chronic_diseases  | TEXT    | 慢性病史            |

### health_data（健康数据表）

| 字段         | 类型    | 说明     |
| ------------ | ------- | -------- |
| id           | INTEGER | 主键     |
| user_id      | INTEGER | 用户 ID  |
| record_date  | TEXT    | 记录日期 |
| weight       | REAL    | 体重     |
| systolic_bp  | INTEGER | 收缩压   |
| diastolic_bp | INTEGER | 舒张压   |
| steps        | INTEGER | 步数     |
| heart_rate   | INTEGER | 心率     |
| blood_sugar  | REAL    | 血糖     |
| temperature  | REAL    | 体温     |
| sleep_hours  | REAL    | 睡眠时长 |
| water_intake | INTEGER | 饮水量   |
| notes        | TEXT    | 备注     |

### medications（用药记录表）

| 字段          | 类型    | 说明     |
| ------------- | ------- | -------- |
| id            | INTEGER | 主键     |
| user_id       | INTEGER | 用户 ID  |
| medicine_name | TEXT    | 药品名称 |
| dosage        | TEXT    | 剂量     |
| frequency     | TEXT    | 频率     |
| start_date    | TEXT    | 开始日期 |
| end_date      | TEXT    | 结束日期 |
| notes         | TEXT    | 备注     |

### health_goals（健康目标表）

| 字段          | 类型    | 说明     |
| ------------- | ------- | -------- |
| id            | INTEGER | 主键     |
| user_id       | INTEGER | 用户 ID  |
| goal_type     | TEXT    | 目标类型 |
| target_value  | REAL    | 目标值   |
| current_value | REAL    | 当前值   |
| start_date    | TEXT    | 开始日期 |
| end_date      | TEXT    | 结束日期 |
| status        | TEXT    | 状态     |

### reminders（提醒事项表）

| 字段          | 类型    | 说明     |
| ------------- | ------- | -------- |
| id            | INTEGER | 主键     |
| user_id       | INTEGER | 用户 ID  |
| reminder_type | TEXT    | 提醒类型 |
| title         | TEXT    | 标题     |
| reminder_time | TEXT    | 提醒时间 |
| repeat_type   | TEXT    | 重复类型 |
| is_active     | INTEGER | 是否激活 |

### diet_records（饮食记录表）

| 字段             | 类型    | 说明     |
| ---------------- | ------- | -------- |
| id               | INTEGER | 主键     |
| user_id          | INTEGER | 用户 ID  |
| record_date      | TEXT    | 记录日期 |
| meal_type        | TEXT    | 餐次     |
| food_description | TEXT    | 食物描述 |
| calories         | INTEGER | 热量     |

---

## 🔒 安全与隐私

### 数据安全

- 密码采用 SHA256 加密存储
- 数据库本地存储（`health_system.db`）
- 不会上传到任何云端服务器

### 隐私保护

- 所有健康数据仅存储在本地
- 仅登录用户可查看自己的数据
- 管理员只能查看统计数据，无法查看个人详细信息

### 备份建议

- 定期备份 `health_system.db` 文件
- 建议每周备份一次
- 备份文件可存储到云盘或移动硬盘

---

## 📞 技术支持

### 系统要求

- Python 3.7+
- matplotlib 库
- 操作系统：Windows/Mac/Linux

### 端口占用

- 服务器端口：9999
- 如需修改，请同时修改 `server.py` 和 `client.py` 中的 `PORT` 配置

### 日志查看

- 服务器日志：查看运行 `server.py` 的终端窗口
- 客户端错误：查看弹窗提示

---

## 🎓 学习建议

### 适用场景

1. **个人健康管理**：日常健康数据记录与分析
2. **慢病管理**：高血压、糖尿病等慢性病患者
3. **减肥健身**：体重管理、运动记录
4. **老年人健康**：家人可远程查看健康数据
5. **Python 学习**：作为课程设计项目学习

### 扩展方向

- 添加数据导出功能（Excel/PDF）
- 接入智能手环/体脂秤
- 添加健康报告生成
- 实现数据分享功能
- 添加健康知识库

---

## 📄 许可证

本项目仅供学习使用，不得用于商业用途。

---

**祝您使用愉快，身体健康！** 🎉
